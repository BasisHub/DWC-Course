# Phase 3: Navigation & Design Polish - Research

**Researched:** 2026-01-31
**Domain:** Docusaurus sidebar configuration, homepage design, Infima CSS theming, dark mode, responsive layout
**Confidence:** HIGH

## Summary

This phase transforms the site from a functional documentation skeleton into a polished, client-facing resource. The work spans four technical domains: (1) restructuring the sidebar from a flat auto-generated list into manually defined grouped categories, (2) redesigning the homepage from a simple Markdown doc into a modern hero + feature highlights + grouped chapter cards layout, (3) shifting the color palette from green to blue across all Infima CSS variables and custom components, and (4) verifying dark mode and responsive behavior across all custom components.

The current site uses Docusaurus 3.9.2 with Infima as the CSS framework. The sidebar is fully auto-generated (`{type: 'autogenerated', dirName: '.'}`), the homepage is a Markdown file (`docs/index.md` with `slug: /`), and the primary color is green (#2e8555 light, #25c2a0 dark). All changes can be accomplished using Docusaurus's built-in sidebar configuration, MDX components, and Infima CSS variables -- no additional npm packages are needed.

**Primary recommendation:** Use manual sidebar categories with nested autogenerated items for each section, keep the homepage as an MDX doc (not a React page) to avoid route conflicts, and use the Docusaurus color generator tool to produce a WCAG-AA-compliant blue palette for both light and dark modes.

## Standard Stack

### Core

No new packages are needed. This phase is entirely about configuration and CSS.

| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| Docusaurus | 3.9.2 | Site framework | Already installed; sidebar config, MDX support, Infima theming are built in |
| Infima | (bundled) | CSS framework | Provides the `--ifm-color-primary` variable system and grid layout |
| clsx | ^2.0.0 | Conditional CSS classes | Already installed; used by existing components |

### Supporting

| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| @docusaurus/Link | (bundled) | Internal navigation links | CTA buttons on homepage |
| @theme/Heading | (bundled) | Semantic headings | Section headers in homepage |
| @theme/IdealImage | (bundled) | Optimized images | Only if a DWC screenshot is added to homepage |

### Alternatives Considered

| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| MDX homepage in docs/ | React page in src/pages/ | React page would conflict with `routeBasePath: '/'` -- Docusaurus explicitly warns against having both `docs/index.md` (with `slug: /`) and `src/pages/index.tsx`. Keep the MDX approach. |
| Manual sidebar | _category_.json files | _category_.json only controls metadata for auto-generated categories (label, position, collapsed). It cannot regroup chapters across directories into new top-level sections. Manual sidebar is required. |
| Infima grid for responsive | CSS Grid / Flexbox custom | Infima grid is limited (no responsive column classes like Bootstrap). Custom media queries at 996px and 576px are needed for card reflow. |

**Installation:**
```bash
# No new packages needed
```

## Architecture Patterns

### Recommended Project Structure

```
sidebars.ts                    # Manual sidebar with 4 category groups
docs/
  index.md                     # Homepage (MDX with hero + features + cards)
  prerequisites.md             # Top-level docs (outside categories)
  resources.md
  samples.md
  01-gui-to-bui-to-dwc/       # Chapters stay in their directories
  02-browser-developer-tools/
  ...
src/
  components/
    ChapterCards/              # Redesigned: grouped by section
      index.tsx
      styles.module.css
    HomepageFeatures/          # Redesigned: feature highlights
      index.tsx
      styles.module.css
    Hero/                      # NEW: hero section component
      index.tsx
      styles.module.css
  css/
    custom.css                 # Blue palette, dark mode, search UI overrides
```

### Pattern 1: Manual Sidebar with Nested Autogenerated Items

**What:** Replace the current `{type: 'autogenerated', dirName: '.'}` with manual categories that each use autogenerated items for their chapter directories.

**When to use:** When you need to group existing directory-based chapters into logical sections that don't match the filesystem hierarchy.

**Example:**
```typescript
// Source: https://docusaurus.io/docs/sidebar/autogenerated
// sidebars.ts
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  tutorialSidebar: [
    'index',           // Homepage
    'prerequisites',   // Top-level pages
    'samples',
    'resources',
    {
      type: 'category',
      label: 'Getting Started',
      collapsible: true,
      collapsed: false,
      items: [
        {type: 'autogenerated', dirName: '01-gui-to-bui-to-dwc'},
        {type: 'autogenerated', dirName: '02-browser-developer-tools'},
        {type: 'autogenerated', dirName: '03-dwc-debugging'},
      ],
    },
    {
      type: 'category',
      label: 'Core Concepts',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '04-upgrading-apps'},
        {type: 'autogenerated', dirName: '05-dwc-controls'},
        {type: 'autogenerated', dirName: '06-flow-layouts'},
      ],
    },
    {
      type: 'category',
      label: 'Advanced Topics',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '07-icon-pools'},
        {type: 'autogenerated', dirName: '08-control-validation'},
        {type: 'autogenerated', dirName: '09-browser-constraints'},
        {type: 'autogenerated', dirName: '10-embedding-components'},
        {type: 'autogenerated', dirName: '11-advanced-responsive'},
      ],
    },
    {
      type: 'category',
      label: 'Deployment',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '12-deployment'},
      ],
    },
  ],
};

export default sidebars;
```

**Key details:**
- Each `autogenerated` block resolves to the chapter's `index.md` plus any sub-pages (like `01-registering-launching.md`). The directory itself becomes a nested category automatically.
- Chapter titles come from frontmatter `title` field. The number prefix (e.g., "01 -") is NOT currently in the titles -- the directory names use number prefixes (e.g., `01-gui-to-bui-to-dwc`) but the frontmatter `title` is already clean (e.g., "GUI to BUI to DWC"). No title renaming is needed in frontmatter.
- The `collapsed: false` on "Getting Started" makes it expanded by default; other sections start collapsed.

### Pattern 2: MDX Homepage with Imported React Components

**What:** Keep `docs/index.md` as the homepage (it has `slug: /`) but enhance it with imported React components for the hero section, feature highlights, and grouped chapter cards.

**When to use:** When docs are served at root (`routeBasePath: '/'`) and you need a rich homepage without creating route conflicts.

**Example:**
```mdx
---
sidebar_position: 1
slug: /
title: BBj DWC Training
hide_table_of_contents: true
---

import Hero from '@site/src/components/Hero';
import HomepageFeatures from '@site/src/components/HomepageFeatures';
import ChapterCards from '@site/src/components/ChapterCards';

<Hero />

<HomepageFeatures />

<ChapterCards />
```

**Key details:**
- Adding `hide_table_of_contents: true` to frontmatter removes the right-side TOC on the homepage.
- The homepage will still render inside the docs layout (with sidebar). To hide the sidebar on the homepage only, add `sidebar_class_name: hidden` or use CSS to hide `.theme-doc-sidebar-container` when on the root path.
- Alternatively, consider using `displayed_sidebar: null` or customizing via CSS to create a full-width homepage feel.

### Pattern 3: Infima Color Palette Override

**What:** Replace all 7 `--ifm-color-primary-*` variables in `:root` and `[data-theme='dark']` selectors.

**When to use:** Any time you change the site's accent color.

**Example:**
```css
/* Source: https://docusaurus.io/docs/styling-layout
   Generated using the Docusaurus color generator tool.
   Target: professional blue, WCAG-AA compliant */

:root {
  --ifm-color-primary: #2563eb;          /* Blue 600 - base */
  --ifm-color-primary-dark: #1d4ed8;     /* Blue 700 */
  --ifm-color-primary-darker: #1e40af;   /* Blue 800 */
  --ifm-color-primary-darkest: #1e3a8a;  /* Blue 900 */
  --ifm-color-primary-light: #3b82f6;    /* Blue 500 */
  --ifm-color-primary-lighter: #60a5fa;  /* Blue 400 */
  --ifm-color-primary-lightest: #93c5fd; /* Blue 300 */
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);
}

[data-theme='dark'] {
  --ifm-color-primary: #60a5fa;          /* Blue 400 - lighter for dark bg */
  --ifm-color-primary-dark: #3b82f6;     /* Blue 500 */
  --ifm-color-primary-darker: #2563eb;   /* Blue 600 */
  --ifm-color-primary-darkest: #1d4ed8;  /* Blue 700 */
  --ifm-color-primary-light: #93c5fd;    /* Blue 300 */
  --ifm-color-primary-lighter: #bfdbfe;  /* Blue 200 */
  --ifm-color-primary-lightest: #dbeafe; /* Blue 100 */
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);
}
```

**Key details:**
- The exact blue shades should be validated using the Docusaurus color generator at https://docusaurus.io/docs/styling-layout for WCAG-AA compliance.
- The light mode primary needs at least 4.5:1 contrast against white (#fff) for WCAG-AA. Blue-600 (#2563eb) has approximately 4.6:1 against white.
- The dark mode primary needs good contrast against the dark background (typically #1b1b1d). Blue-400 (#60a5fa) has approximately 5.5:1 against #1b1b1d.
- The Tailwind CSS blue scale is used here as a reference palette but the exact values should be tuned with the Docusaurus generator.

### Anti-Patterns to Avoid

- **Don't create src/pages/index.tsx:** This will conflict with `docs/index.md` which has `slug: /`. Docusaurus warns about duplicate routes and behavior is unpredictable.
- **Don't use `_category_.json` for top-level grouping:** These files only control the label/position of existing filesystem-based categories. They cannot create new parent categories that span multiple directories.
- **Don't use `useColorMode()` for conditional rendering:** This causes hydration mismatches. Use CSS `[data-theme='dark']` selectors instead.
- **Don't hardcode the 996px breakpoint value:** Import it from nowhere -- it's hardcoded in Infima. Just use `@media (max-width: 996px)` to match Infima's behavior.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Color palette generation | Manual shade calculation | Docusaurus color generator at /docs/styling-layout | Ensures WCAG-AA compliance and proper shade distribution |
| Sidebar categories | Custom sidebar React component | `sidebars.ts` manual config with `type: 'category'` | Built-in, supports collapsible, auto-ordering, breadcrumbs |
| Dark mode detection | JS-based theme detection | CSS `[data-theme='dark']` selector | Avoids hydration mismatches, works with SSR |
| Responsive grid | Custom grid system | Infima `row`/`col` classes + custom `@media` queries | Infima grid already used by existing components |
| Search UI theming | Forking search plugin CSS | Override `--search-local-*` CSS variables | Plugin exposes CSS custom properties for all styling |

**Key insight:** Docusaurus and Infima provide CSS variables for virtually everything. The right approach is to override variables, not to write custom component logic.

## Common Pitfalls

### Pitfall 1: Route Conflict Between docs/index.md and src/pages/index.tsx

**What goes wrong:** Creating a React page at `src/pages/index.tsx` while `docs/index.md` has `slug: /` creates duplicate routes. The build may succeed but behavior is unpredictable.
**Why it happens:** `routeBasePath: '/'` maps the docs plugin to the site root, and `slug: /` in docs/index.md explicitly claims the `/` route.
**How to avoid:** Keep the homepage as `docs/index.md` (MDX). Import React components into MDX to get the rich layout.
**Warning signs:** Build warnings about duplicate routes, or the homepage showing the wrong content.

### Pitfall 2: Sidebar Items Not Appearing After Switching to Manual Config

**What goes wrong:** After switching from `{type: 'autogenerated', dirName: '.'}` to manual categories, some pages disappear from the sidebar.
**Why it happens:** Manual sidebar config only shows items you explicitly list. Top-level docs like `prerequisites.md`, `resources.md`, and `samples.md` need to be listed individually.
**How to avoid:** Account for every doc file. List top-level docs outside of category groups. Use `{type: 'autogenerated', dirName: 'XX-dirname'}` within categories to auto-include all pages in a chapter directory.
**Warning signs:** Pages are accessible by URL but don't appear in the sidebar.

### Pitfall 3: External Link Icon Appearing on Internal CTA Buttons

**What goes wrong:** The existing global CSS adds an external link icon (`::after` pseudo-element) to all `<a>` tags with `href` starting with `http://` or `https://`. This could affect CTA buttons if they use full URLs.
**Why it happens:** The CSS selector `a[href^="http://"]::after` is broad and applies globally.
**How to avoid:** Use Docusaurus `<Link>` component (which generates relative links) for all internal navigation. Add a CSS exception class if needed (e.g., `.no-external-icon::after { display: none }`).
**Warning signs:** Unwanted arrow icons on buttons or cards.

### Pitfall 4: Dark Mode Colors Not Applying to Custom Components

**What goes wrong:** New components look correct in light mode but use wrong colors or have poor contrast in dark mode.
**Why it happens:** Custom CSS only targets `:root` without corresponding `[data-theme='dark']` overrides. Hardcoded color values (like `#fff` backgrounds or `rgba()` shadows) don't adapt.
**How to avoid:** For every custom CSS declaration that uses a color, also define a `[data-theme='dark']` variant. Use Infima CSS variables (like `var(--ifm-background-color)`, `var(--ifm-font-color-base)`) instead of hardcoded values whenever possible.
**Warning signs:** White boxes on dark backgrounds, invisible text, harsh shadows.

### Pitfall 5: Infima Grid Columns Not Reflowing on Mobile

**What goes wrong:** Cards display in a 3-column grid on desktop but don't reflow to single column on mobile.
**Why it happens:** Infima's grid does reflow all `col` elements to 100% width below 996px, but only if using the `col` class. Custom layout using `col col--4` will also reflow because of the blanket `.col { --ifm-col-width: 100% }` rule at 996px. However, if custom CSS overrides `flex-basis` or uses `display: grid` instead of Infima's `row`/`col`, the automatic reflow breaks.
**How to avoid:** Use Infima `row` and `col col--4` (or similar) classes for card grids. Don't override `flex-basis` in custom CSS. Test at 996px breakpoint.
**Warning signs:** Cards overflow horizontally on mobile, or stack awkwardly with wrong widths.

### Pitfall 6: Mermaid Diagrams Not Switching Theme

**What goes wrong:** Mermaid diagrams stay in light theme when switching to dark mode.
**Why it happens:** Mermaid diagrams are rendered once on page load. The `@docusaurus/theme-mermaid` package handles re-rendering on theme switch, but custom `themeVariables` are not per-mode (only the top-level `theme` key supports light/dark switching).
**How to avoid:** The current config already handles this correctly with `mermaid: { theme: { light: 'neutral', dark: 'dark' } }`. Do not add custom `themeVariables` that assume one mode. If custom colors are needed, they must work in both modes.
**Warning signs:** Diagrams look washed out or have invisible text after theme toggle.

## Code Examples

### Manual Sidebar with Categories and Autogenerated Items

```typescript
// Source: https://docusaurus.io/docs/sidebar/autogenerated
// sidebars.ts
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  tutorialSidebar: [
    'index',
    'prerequisites',
    'samples',
    'resources',
    {
      type: 'category',
      label: 'Getting Started',
      collapsible: true,
      collapsed: false,
      items: [
        {type: 'autogenerated', dirName: '01-gui-to-bui-to-dwc'},
        {type: 'autogenerated', dirName: '02-browser-developer-tools'},
        {type: 'autogenerated', dirName: '03-dwc-debugging'},
      ],
    },
    {
      type: 'category',
      label: 'Core Concepts',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '04-upgrading-apps'},
        {type: 'autogenerated', dirName: '05-dwc-controls'},
        {type: 'autogenerated', dirName: '06-flow-layouts'},
      ],
    },
    {
      type: 'category',
      label: 'Advanced Topics',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '07-icon-pools'},
        {type: 'autogenerated', dirName: '08-control-validation'},
        {type: 'autogenerated', dirName: '09-browser-constraints'},
        {type: 'autogenerated', dirName: '10-embedding-components'},
        {type: 'autogenerated', dirName: '11-advanced-responsive'},
      ],
    },
    {
      type: 'category',
      label: 'Deployment',
      collapsible: true,
      collapsed: true,
      items: [
        {type: 'autogenerated', dirName: '12-deployment'},
      ],
    },
  ],
};

export default sidebars;
```

### Search UI Dark Mode Customization

```css
/* Source: node_modules/@easyops-cn/docusaurus-search-local SearchBar.module.css
   The plugin exposes these CSS custom properties for theming: */

:root {
  --search-local-highlight-color: var(--ifm-color-primary);
  /* Other available variables:
     --search-local-modal-background
     --search-local-modal-shadow
     --search-local-modal-width (default: 560px)
     --search-local-modal-width-sm (default: 340px)
     --search-local-hit-background
     --search-local-hit-shadow
     --search-local-hit-color
     --search-local-hit-height (default: 56px)
     --search-local-hit-active-color
     --search-local-muted-color
     --search-local-spacing (default: 12px)
     --search-local-icon-stroke-width (default: 1.4)
     --search-local-input-active-border-color
  */
}

[data-theme='dark'] {
  --search-local-highlight-color: var(--ifm-color-primary);
  /* The plugin already has dark mode defaults that use Infima variables
     like var(--ifm-background-color), var(--ifm-color-emphasis-100),
     var(--ifm-font-color-base). If the Infima primary color is changed
     to blue, the search highlight automatically picks it up. */
}
```

### Hero Component Pattern

```tsx
// src/components/Hero/index.tsx
import type {ReactNode} from 'react';
import clsx from 'clsx';
import Link from '@docusaurus/Link';
import Heading from '@theme/Heading';
import styles from './styles.module.css';

export default function Hero(): ReactNode {
  return (
    <header className={styles.hero}>
      <div className="container">
        <Heading as="h1" className={styles.heroTitle}>
          BBj DWC Training
        </Heading>
        <p className={styles.heroSubtitle}>
          Master the Dynamic Web Client with this comprehensive 12-chapter course
        </p>
        <div className={styles.heroButtons}>
          <Link
            className="button button--primary button--lg"
            to="/gui-to-bui-to-dwc">
            Start Learning
          </Link>
        </div>
      </div>
    </header>
  );
}
```

```css
/* src/components/Hero/styles.module.css */
.hero {
  padding: 4rem 0;
  text-align: center;
}

.heroTitle {
  font-size: 3rem;
  font-weight: 800;
}

.heroSubtitle {
  font-size: 1.25rem;
  color: var(--ifm-color-content-secondary);
  max-width: 600px;
  margin: 1rem auto 2rem;
}

.heroButtons {
  display: flex;
  justify-content: center;
  gap: 1rem;
}

@media (max-width: 996px) {
  .heroTitle {
    font-size: 2rem;
  }

  .heroSubtitle {
    font-size: 1rem;
  }
}
```

### Grouped Chapter Cards Pattern

```tsx
// src/components/ChapterCards/index.tsx (redesigned)
import type {ReactNode} from 'react';
import clsx from 'clsx';
import Heading from '@theme/Heading';
import Link from '@docusaurus/Link';
import styles from './styles.module.css';

type ChapterItem = {
  title: string;
  slug: string;
  description: ReactNode;
};

type SectionItem = {
  label: string;
  chapters: ChapterItem[];
};

const sections: SectionItem[] = [
  {
    label: 'Getting Started',
    chapters: [
      { title: 'GUI to BUI to DWC', slug: '/gui-to-bui-to-dwc', description: <>...</> },
      { title: 'Browser Developer Tools', slug: '/browser-developer-tools', description: <>...</> },
      { title: 'DWC Debugging', slug: '/dwc-debugging', description: <>...</> },
    ],
  },
  // ... Core Concepts, Advanced Topics, Deployment
];

function ChapterCard({title, slug, description}: ChapterItem) {
  return (
    <div className={clsx('col col--4')}>
      <Link to={slug} className={styles.card}>
        <Heading as="h3" className={styles.cardTitle}>{title}</Heading>
        <p className={styles.cardDescription}>{description}</p>
      </Link>
    </div>
  );
}

export default function ChapterCards(): ReactNode {
  return (
    <section className={styles.chapters}>
      <div className="container">
        {sections.map((section) => (
          <div key={section.label} className={styles.section}>
            <Heading as="h2" className={styles.sectionTitle}>
              {section.label}
            </Heading>
            <div className="row">
              {section.chapters.map((chapter) => (
                <ChapterCard key={chapter.slug} {...chapter} />
              ))}
            </div>
          </div>
        ))}
      </div>
    </section>
  );
}
```

### Dark Mode Aware Card Styling

```css
/* Use Infima variables for automatic dark mode adaptation */
.card {
  display: block;
  padding: 1.5rem;
  border: 1px solid var(--ifm-color-emphasis-200);
  border-radius: 8px;
  background: var(--ifm-card-background-color);
  text-decoration: none;
  color: inherit;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.card:hover {
  border-color: var(--ifm-color-primary);
  box-shadow: 0 2px 12px var(--ifm-color-emphasis-100);
  text-decoration: none;
  color: inherit;
}

/* Dark mode: subtler shadows, different border emphasis */
[data-theme='dark'] .card {
  border-color: var(--ifm-color-emphasis-300);
}

[data-theme='dark'] .card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
}
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Auto-generated sidebar from filesystem | Manual sidebar with categories containing autogenerated slices | Docusaurus 2.0+ | Full control over grouping while keeping auto-detection of new pages within chapters |
| Green default Docusaurus palette | Custom blue palette via Infima CSS variables | N/A (design decision) | Requires updating 7 variables in `:root` and 7 in `[data-theme='dark']` |
| SVG illustrations on homepage | Text-focused minimal design | N/A (design decision) | Existing SVGs (`bbj-to-web.svg`, `css-layouts.svg`, `validation.svg`) may be retired in favor of clean text-based feature highlights |
| Emoji icons on chapter cards | Text-only clean cards | N/A (design decision) | Remove emoji `icon` field from ChapterList, use typography and spacing for visual hierarchy |

**Deprecated/outdated:**
- The `src/pages/index.module.css` file is a leftover from the Docusaurus starter template. It is not used by any page (there is no `src/pages/index.tsx`). It can be safely deleted.
- The `src/pages/markdown-page.md` file is another starter template leftover. Can be deleted unless it serves a purpose.
- The three `undraw_docusaurus_*.svg` files in `static/img/` are Docusaurus starter template assets, unused. Can be deleted.

## Codebase-Specific Findings

### Current Sidebar State
- `sidebars.ts`: Uses `{type: 'autogenerated', dirName: '.'}` -- fully auto-generated.
- No `_category_.json` files exist in any chapter directory.
- Chapter directory names use number prefixes (`01-gui-to-bui-to-dwc`, etc.).
- Chapter frontmatter `title` fields are already clean (no number prefixes like "01 -").
- Top-level docs: `index.md` (homepage), `prerequisites.md`, `resources.md`, `samples.md`.
- Frontmatter `sidebar_position` values currently control ordering within the flat list. These will become less relevant with manual categories but should be kept consistent for ordering within each autogenerated section.

### Current Homepage State
- `docs/index.md` has `slug: /` and imports `ChapterCards` component.
- No `src/pages/index.tsx` exists (safe -- no route conflict).
- `src/pages/index.module.css` exists but is unused (leftover from template).
- The `HomepageFeatures` component exists but is NOT imported on the homepage. It references three SVGs that exist in `static/img/`.

### Current Color State
- Light: `--ifm-color-primary: #2e8555` (green)
- Dark: `--ifm-color-primary: #25c2a0` (teal)
- External link icon uses hardcoded fill colors (`#525252` light, `#b4b4b4` dark) -- will need updating if the icon should match the new blue palette.

### Current Component State
- `ChapterCards`: 12 items with number, title, slug, icon (emoji), description. Uses `col col--4` grid (3 columns). Has hover effect with transform and shadow. CSS uses `var(--ifm-color-primary)` for chapter numbers and hover links.
- `HomepageFeatures`: 3 items with title, SVG, description. Uses `col col--4` grid. Not currently used on the homepage.
- Both components use CSS modules (`.module.css`).
- Both use Infima grid classes (`row`, `col col--4`), which will properly reflow at 996px.

### Current Dark Mode State
- `colorMode.respectPrefersColorScheme: true` -- respects system preference.
- Dark mode variables are defined in `[data-theme='dark']` in custom.css.
- Mermaid is already configured with `theme: { light: 'neutral', dark: 'dark' }` -- auto-switches.
- ChapterCards dark mode: hover shadow uses `rgba(0, 0, 0, 0.3)` -- adequate but minimal.
- Search plugin: Already has built-in dark mode CSS. The `--search-local-highlight-color` falls back to `var(--ifm-color-primary)`, so changing the Infima primary color to blue automatically updates the search highlight.

### Infima Breakpoints (verified from source)
- `996px`: All `col` elements become `--ifm-col-width: 100%` (single column). This is Docusaurus's mobile/desktop breakpoint.
- `576px`: Smaller viewport adjustments (search bar width, etc.).
- No responsive column classes (no `col--sm-6`, `col--md-4` etc.). Responsive behavior is all-or-nothing at 996px.

## Open Questions

1. **Homepage sidebar visibility**
   - What we know: The homepage (`docs/index.md`) renders inside the docs layout, which includes the sidebar.
   - What's unclear: Whether the sidebar should be hidden on the homepage for a full-width hero experience, or kept visible for navigation consistency.
   - Recommendation: Use Docusaurus frontmatter or CSS to hide the sidebar on the homepage only. Possible approaches: `sidebar_class_name: hidden` in frontmatter, or swizzling `DocPage` layout. Research during implementation which approach is cleanest.

2. **Exact chapter-to-section mapping**
   - What we know: The CONTEXT.md specifies 4 sections (Getting Started, Core Concepts, Advanced Topics, Deployment). 12 chapters need to be distributed.
   - What's unclear: The exact mapping is a content decision. The example in this research uses a reasonable default (Ch 1-3 / Ch 4-6 / Ch 7-11 / Ch 12) but this should be confirmed.
   - Recommendation: Use the mapping shown in the code examples unless the user specifies otherwise during planning.

3. **Exact blue shade**
   - What we know: The decision is "blue/professional accent color." Reference: Stripe, Linear.
   - What's unclear: The exact hex value hasn't been finalized.
   - Recommendation: Use the Docusaurus color generator with a starting point around `#2563eb` (Tailwind Blue 600) for light mode. Validate WCAG-AA compliance. The dark mode variant should be around `#60a5fa` (Tailwind Blue 400).

4. **Homepage sidebar hiding mechanism**
   - What we know: Docusaurus does not have a simple frontmatter option to hide the sidebar on a single docs page without affecting others.
   - What's unclear: The cleanest way to achieve a full-width homepage within the docs plugin.
   - Recommendation: Test these approaches during implementation: (a) CSS targeting the homepage path, (b) `displayed_sidebar` frontmatter, (c) using a custom wrapper component. The simplest approach that works should be used.

## Sources

### Primary (HIGH confidence)
- [Docusaurus Sidebar Items](https://docusaurus.io/docs/sidebar/items) - Category configuration, collapsible options, TypeScript types
- [Docusaurus Autogenerated Sidebar](https://docusaurus.io/docs/sidebar/autogenerated) - dirName nesting, autogenerated slices within manual categories
- [Docusaurus Styling and Layout](https://docusaurus.io/docs/styling-layout) - Infima CSS variables, color generator, dark mode selectors, CSS modules
- [Docusaurus Theme Configuration](https://docusaurus.io/docs/api/themes/configuration) - colorMode, Mermaid themes, navbar/footer config
- [Docusaurus Creating Pages](https://docusaurus.io/docs/creating-pages) - Route conflicts, Layout component
- [Docusaurus Docs Introduction](https://docusaurus.io/docs/docs-introduction) - routeBasePath routing, slug conflict warning
- [Docusaurus Diagrams](https://docusaurus.io/docs/markdown-features/diagrams) - Mermaid light/dark theme config
- Infima source CSS (verified from `node_modules/infima/dist/css/default/default.css`) - 996px and 576px breakpoints confirmed
- Search plugin CSS (verified from `node_modules/@easyops-cn/docusaurus-search-local`) - CSS custom properties and dark mode selectors

### Secondary (MEDIUM confidence)
- [Infima CSS Variables Gist](https://gist.github.com/abhigyantrips/b828ca46b2460c6699c73e0162f6be80) - Comprehensive list of --ifm- variables
- [Docusaurus GitHub Issue #9603](https://github.com/facebook/docusaurus/issues/9603) - Breakpoint configurability status
- [Docusaurus GitHub Issue #10251](https://github.com/facebook/docusaurus/issues/10251) - Mermaid per-mode options limitation
- [easyops-cn/docusaurus-search-local GitHub](https://github.com/easyops-cn/docusaurus-search-local) - Search plugin CSS variable documentation

### Tertiary (LOW confidence)
- None -- all findings verified against primary or secondary sources

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH - No new packages needed, all patterns verified in Docusaurus official docs
- Architecture: HIGH - Sidebar config, MDX homepage, Infima theming all verified against source code and official docs
- Pitfalls: HIGH - Route conflicts, dark mode, responsive breakpoints all verified against Docusaurus docs and Infima source

**Research date:** 2026-01-31
**Valid until:** 2026-03-02 (30 days -- stable Docusaurus 3.9.2 release, no breaking changes expected)
